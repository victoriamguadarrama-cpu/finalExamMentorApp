<!-- Page Title -->
<div class="page-title" data-aos="fade">
  <div class="heading">
    <div class="container">
      <div class="row d-flex justify-content-center text-center">
        <div class="col-lg-8">
          <h1>My Profile</h1>
          <p class="mb-0">View your account information and registered courses</p>
        </div>
      </div>
    </div>
  </div>
  <nav class="breadcrumbs">
    <div class="container">
      <ol>
        <li><a href="/">Home</a></li>
        <li class="current">Profile</li>
      </ol>
    </div>
  </nav>
</div>
<!-- End Page Title -->

<!-- Profile Section -->
<section id="profile" class="profile section">
  <div class="container">
    <div class="row">
      
      <!-- User Info Card -->
      <div class="col-lg-4 mb-4">
        <div class="card">
          <div class="card-body text-center">
            <div class="mb-3">
              <i class="bi bi-person-circle" style="font-size: 80px; color: #5fcf80;"></i>
            </div>
            <h4><%= user.firstName %> <%= user.lastName %></h4>
            <p class="text-muted"><%= user.email %></p>
            
            <% if (user.roles && user.roles.includes('admin')) { %>
              <span class="badge bg-danger">Admin</span>
            <% } else { %>
              <span class="badge bg-primary">User</span>
            <% } %>
            
            <hr>
            
            <div class="d-grid gap-2 mt-3">
              <a href="/courses" class="btn btn-primary">
                <i class="bi bi-book"></i> Browse Courses
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Registered Courses -->
      <div class="col-lg-8">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">
              <i class="bi bi-list-check"></i> My Registered Courses
              <span class="badge bg-success"><%= user.courses.length %></span>
            </h5>
          </div>
          <div class="card-body">
            
            <% if (user.courses.length === 0) { %>
              <div class="alert alert-info text-center">
                <i class="bi bi-info-circle"></i>
                You haven't registered for any courses yet.
                <a href="/courses" class="alert-link">Browse available courses</a>
              </div>
            <% } else { %>
              <div class="list-group">
                <% user.courses.forEach(course => { %>
                  <a href="/courses/<%= course.slug %>" class="list-group-item list-group-item-action">
                    <div class="d-flex w-100 justify-content-between align-items-center">
                      <div>
                        <h6 class="mb-1"><%= course.title %></h6>
                        <p class="mb-1 text-muted">
                          <i class="bi bi-person"></i> <%= course.trainer.name %>
                        </p>
                      </div>
                      <div class="text-end">
                        <span class="badge bg-success">$<%= course.price %></span>
                      </div>
                    </div>
                  </a>
                <% }) %>
              </div>
            <% } %>
            
          </div>
        </div>
      </div>

    </div>
  </div>
</section>
<!-- End Profile Section -->